// V21 æ ¸å¿ƒå„ªåŒ–ï¼šå°å…¥æ™‚è‡ªå‹•åµæ¸¬æ¨™ç±¤
function importData(input) {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e) => {
        try {
            const d = JSON.parse(e.target.result);
            merchList = d.merchList || [];
            
            // å¦‚æœå°å…¥æª”æ²’æœ‰ dictï¼Œæˆ–è€…ç‚ºäº†ç¢ºä¿æ¨™ç±¤å®Œæ•´ï¼Œé€²è¡Œå…¨é‡æƒæ
            let newDict = d.dict || { works: [], roles: [], types: [] };
            
            merchList.forEach(item => {
                if (item.work && !newDict.works.includes(item.work)) newDict.works.push(item.work);
                if (item.role && !newDict.roles.includes(item.role)) newDict.roles.push(item.role);
                if (item.type && !newDict.types.includes(item.type)) newDict.types.push(item.type);
            });

            // æ’åºå­—å…¸
            newDict.works.sort();
            newDict.roles.sort();
            newDict.types.sort();
            
            dict = newDict;
            save();
            init(); // é‡æ–°åˆå§‹åŒ–æ•´å€‹ä»‹é¢
            showModal("ğŸ“¥", "IMPORTED & SYNCED");
        } catch (err) {
            alert("å°å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æª”æ¡ˆæ ¼å¼");
        }
    };
    reader.readAsText(file);
}
